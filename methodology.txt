PROJECT METHODOLOGY: SMART HOME ENERGY PREDICTION & MONITORING SYSTEM
========================================================================

1. INTRODUCTION & OBJECTIVE
------------------------------------------------------------------------
The primary objective of this project is to develop an intelligent system capable of forecasting household energy consumption and monitoring real-time electrical parameters. The system bridges the gap between historical data analysis and real-time IoT application by integrating Deep Learning models with a Physics-Based Virtual Smart Meter.

2. DATA ARCHITECTURE
------------------------------------------------------------------------
A. Primary Dataset (CEEW BR04)
   - Source: CEEW (Council on Energy, Environment and Water) Smart Meter Data.
   - Resolution: 1-minute interval data aggregated to 1-hour intervals.
   - Core Variables: Active Power (kW), Voltage (V), Current (A), Frequency (Hz).

B. Weather Augmentation
   - Problem: Energy data lacks context (why was usage high?).
   - Solution: We enriched the dataset by mapping historical weather data to every timestamp.
   - Variables Added: Temperature (°C), Humidity (%), Wind Speed (km/h), Pressure (mb).
   - Source: Historical weather records aligned with the 2020 dataset timeframe.

3. DATA PREPROCESSING & FEATURE ENGINEERING
------------------------------------------------------------------------
To prepare the data for the Deep Neural Network, a robust pipeline was established:

A. Cleaning
   - Z-Score Analysis removes statistical outliers (>3 standard deviations).
   - Linear Interpolation fills missing gaps (e.g., sensor downtime).

B. Feature Engineering (17 Input Features)
   1. Temporal Features: Hour (0-23), Day of Week (0-6), Month (1-12).
   2. Cyclical Encoding: Hour_Sin, Hour_Cos (to teach the model that 23:00 is close to 00:00).
   3. Lag Features (Autoregression):
      - Lag_1h: Consumption 1 hour ago (Immediate momentum).
      - Lag_24h: Consumption same time yesterday (Daily seasonality).
      - Lag_168h: Consumption same time last week (Weekly seasonality).
   4. Rolling Statistics:
      - Rolling_Mean_24h: Average usage over the last day (Trend).
      - Rolling_Std_24h: Volatility of usage (Variance).
   5. Weather Context: Temperature, Humidity, Pressure, Wind Speed.

4. MODEL DEVELOPMENT (DEEP NEURAL NETWORK)
------------------------------------------------------------------------
Instead of traditional regression, we deployed a Deep Neural Network (DNN) capable of capturing non-linear relationships between weather and energy.

A. Architecture
   - Input Layer: 17 Neurons (matching features).
   - Hidden Layer 1: 256 Neurons (ReLU Activation) + Batch Normalization + Dropout (0.3).
   - Hidden Layer 2: 128 Neurons (ReLU Activation) + Batch Normalization + Dropout (0.3).
   - Hidden Layer 3: 64 Neurons (ReLU Activation) + Dropout (0.2).
   - Hidden Layer 4: 32 Neurons (ReLU Activation).
   - Output Layer: 1 Neuron (Linear Activation for Regression).

B. Training Strategy
   - Optimizer: Adam (Learning Rate = 0.001).
   - Loss Function: Mean Squared Error (MSE).
   - Validation: Time-Series Split (Training on Jan-Oct, Validation on Nov-Dec) to prevent data leakage (future data predicting past).
   - Early Stopping: Training halts if validation loss stops improving for 15 epochs.

C. Performance
   - R-Squared (Accuracy): 89.22% on unseen test data.

5. VIRTUAL SMART METER (DIGITAL TWIN TECHNOLOGY)
------------------------------------------------------------------------
To enable real-time monitoring without physical hardware, a "Virtual Smart Meter" Physics Engine was developed (`src/virtual_meter.py`). It does NOT output random numbers; it simulates the electrical grid physics.

A. Simulation Logic
   1. Base Load Profile: Determines baseline kW based on time (Sleep vs. Work vs. Peak hours).
   2. Appliance State Machine: Tracks states (AC=ON, Heater=OFF) to add specific load signatures (e.g., +1.5kW for AC).
   3. Noise Injection: Adds Gaussian noise (±0.02 kW) to mimic real sensor jitter.

B. Physics Calculations
   - Voltage Sag: Simulates Ohm's Law impact on the grid.
     Formula: V_actual = 230 - (Load_kW / 5.0) * 5.0  [Voltage drops as Load increases]
   - Power Factor (PF): Randomly varies between 0.85 (Inductive load) and 0.99 (Resistive load).
   - Current Calculation: Derived from the Power equation.
     Formula: Current (A) = (Power_kW * 1000) / (Voltage * PF)
   - Frequency: Grid frequency simulated at 50Hz ± 0.1Hz.

6. APPLICATION FEATURES (USER INTERFACE)
------------------------------------------------------------------------
Built using Streamlit, the application integrates all components:

A. Dashboard ("Overview"): Visualizes yearly trends and heatmaps.
B. AI Forecaster ("Forecast"): Fetches LIVE weather from API, processes it through the DNN model, and predicts the load curve for the next 24 hours.
C. Simulator ("What-If"): Allows users to adjust temperature/humidity sliders to see how the model changes its prediction (Sensitivity Analysis).
D. Live Monitor ("Virtual Meter"): Displays real-time streaming data (V, I, P) from the physics engine and logs it to `live_data_log.csv`.
E. Sustainability: Converts Energy (kWh) -> CO2 Emissions (kg) -> Trees Required.

7. CONCLUSION
------------------------------------------------------------------------
This project successfully demonstrates an End-to-End AIoT solution. By combining rigorous Deep Learning (89% accuracy) with Physics-Based Simulation, it offers a complete tool for Energy Forecasting, Real-Time Monitoring, and Sustainability Planning.
